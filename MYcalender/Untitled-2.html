<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ìº˜ë¦°ë” & ì¼ê¸°ì¥</title>
    <style> 
        * {
            margin: 0;  
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #56ccf2 0%, #2f80ed 50%, #a8dadc 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .main-content {
            display: flex;
            min-height: 600px;
        }
        
        .calendar-section {
            flex: 1;
            padding: 30px;
            border-right: 2px solid #e0e0e0;
        }
        
        .detail-section {
            flex: 1;
            padding: 30px;
            display: none;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .month-nav {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .month-nav:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .current-month {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .day-header {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .day-cell {
            background: white;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .day-cell:hover {
            background: #f0f4ff;
            transform: scale(1.05);
        }
        
        .day-cell.other-month {
            color: #ccc;
            background: #f8f8f8;
        }
        
        .day-cell.selected {
            background: #667eea;
            color: white;
        }
        
        .day-cell.today {
             background: #ff6b6b;
            color: white;
            font-weight: bold;
            position: relative;
        }

        .day-cell.today .today-character {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            z-index: 1;
            animation: bounce 2s ease-in-out infinite;
        }

        .day-cell.today .day-number {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 12px;
            font-weight: bold;
            z-index: 2;
        }
        
        .day-cell.has-schedule::after {
            content: 'â—';
            color: #4caf50;
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 12px;
        }
        
        .detail-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .selected-date {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }
        
        .schedule-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .schedule-controls {
            margin-bottom: 15px;
        }
        
        .add-schedule-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-right: 10px;
        }
        
        .add-schedule-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }
        
        .schedule-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        .schedule-table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: middle;
        }
        
        .schedule-table tr:hover {
            background: #f8f9ff;
        }
        
        .schedule-table input[type="text"],
        .schedule-table input[type="time"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .schedule-table input[type="text"]:focus,
        .schedule-table input[type="time"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }
        
        .delete-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .delete-btn:hover {
            background: #ff5252;
        }
        
        .empty-schedule {
            text-align: center;
            color: #999;
            padding: 30px;
            font-style: italic;
        }
        
        .diary-section {
            margin-bottom: 20px;
        }
        
        .diary-textarea {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }
        
        .diary-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }
        
        .back-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }
        
        .save-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            @keyframes bounce {
                0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
                50% { transform: translate(-50%, -50%) translateY(-5px); }
            }
            .main-content {
                flex-direction: column;
            }
            
            .calendar-section {
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
            }
            
            .calendar-grid {
                gap: 1px;
            }
            
            .day-cell {
                padding: 10px 5px;
                min-height: 50px;
                font-size: 14px;
            }
            
            .schedule-table {
                font-size: 12px;
            }
            
            .schedule-table th,
            .schedule-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“… ë‚˜ë§Œì˜ ìº˜ë¦°ë” & ì¼ê¸°ì¥</h1>
            <p>ì†Œì¤‘í•œ í•˜ë£¨ë¥¼ ê¸°ë¡í•˜ê³  ê³„íší•´ë³´ì„¸ìš”</p>
        </div>
        
        <div class="main-content">
            <!-- ìº˜ë¦°ë” ì„¹ì…˜ -->
            <div class="calendar-section" id="calendarSection">
                <div class="calendar-header">
                    <button class="month-nav" onclick="changeMonth(-1)">â† ì´ì „</button>
                    <div class="current-month" id="currentMonth">2025ë…„ 9ì›”</div>
                    <button class="month-nav" onclick="changeMonth(1)">ë‹¤ìŒ â†’</button>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- ìš”ì¼ í—¤ë” -->
                    <div class="day-header">ì¼</div>
                    <div class="day-header">ì›”</div>
                    <div class="day-header">í™”</div>
                    <div class="day-header">ìˆ˜</div>
                    <div class="day-header">ëª©</div>
                    <div class="day-header">ê¸ˆ</div>
                    <div class="day-header">í† </div>
                    <!-- ë‚ ì§œëŠ” JavaScriptë¡œ ìƒì„± -->
                </div>
            </div>
            
            <!-- ìƒì„¸ë³´ê¸° ì„¹ì…˜ -->
            <div class="detail-section" id="detailSection">
                <div class="detail-header">
                    <div class="selected-date" id="selectedDate">2025ë…„ 9ì›” 12ì¼</div>
                </div>
                
                <div class="schedule-section">
                    <h3 class="section-title">ğŸ“‹ ì˜¤ëŠ˜ì˜ ìŠ¤ì¼€ì¤„</h3>
                    <div class="schedule-controls">
                        <button class="add-schedule-btn" onclick="addScheduleRow()">+ ìƒˆ ìŠ¤ì¼€ì¤„ ì¶”ê°€</button>
                    </div>
                    <div id="scheduleTableContainer">
                        <!-- ìŠ¤ì¼€ì¤„ í‘œê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
                
                <div class="diary-section">
                    <h3 class="section-title">ğŸ“ ì˜¤ëŠ˜ì˜ ì¼ê¸°</h3>
                    <textarea class="diary-textarea" id="diaryText" placeholder="ì˜¤ëŠ˜ í•˜ë£¨ëŠ” ì–´ë• ë‚˜ìš”? ì†Œì¤‘í•œ ìˆœê°„ë“¤ì„ ê¸°ë¡í•´ë³´ì„¸ìš”..."></textarea>
                </div>
                
                <div>
                    <button class="back-btn" onclick="backToCalendar()">â† ìº˜ë¦°ë”ë¡œ ëŒì•„ê°€ê¸°</button>
                    <button class="save-btn" onclick="saveData()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let currentDate = new Date();
        let selectedDate = null;
        let scheduleData = {}; // ë‚ ì§œë³„ ìŠ¤ì¼€ì¤„ ì €ì¥
        let diaryData = {}; // ë‚ ì§œë³„ ì¼ê¸° ì €ì¥
        
        // ì›” ì´ë¦„ ë°°ì—´
        const monthNames = [
            '1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”',
            '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'
        ];
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ìº˜ë¦°ë” ì´ˆê¸°í™” ë° ë°ì´í„° ë¡œë“œ
        window.onload = function() {
            loadFromLocalStorage();
            updateCalendar();
        };
        
        // localStorageì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadFromLocalStorage() {
            const savedSchedules = localStorage.getItem('scheduleData');
            const savedDiaries = localStorage.getItem('diaryData');
            
            if (savedSchedules) {
                scheduleData = JSON.parse(savedSchedules);
            }
            
            if (savedDiaries) {
                diaryData = JSON.parse(savedDiaries);
            }
        }
        
        // localStorageì— ë°ì´í„° ì €ì¥
        function saveToLocalStorage() {
            localStorage.setItem('scheduleData', JSON.stringify(scheduleData));
            localStorage.setItem('diaryData', JSON.stringify(diaryData));
        }
        
        // ìº˜ë¦°ë” ì—…ë°ì´íŠ¸
        function updateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // í˜„ì¬ ì›” í‘œì‹œ ì—…ë°ì´íŠ¸
            document.getElementById('currentMonth').textContent = `${year}ë…„ ${monthNames[month]}`;
            
            // ìº˜ë¦°ë” ê·¸ë¦¬ë“œ ê°€ì ¸ì˜¤ê¸°
            const grid = document.getElementById('calendarGrid');
            
            // ê¸°ì¡´ ë‚ ì§œ ì…€ ì œê±° (ìš”ì¼ í—¤ë” ì œì™¸)
            const existingCells = grid.querySelectorAll('.day-cell');
            existingCells.forEach(cell => cell.remove());
            
            // ì´ë²ˆ ë‹¬ ì²« ë‚ ê³¼ ë§ˆì§€ë§‰ ë‚ 
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            // ì´ë²ˆ ë‹¬ ì²« ë‚ ì˜ ìš”ì¼ (0: ì¼ìš”ì¼)
            const startDayOfWeek = firstDay.getDay();
            
            // ì´ì „ ë‹¬ ë§ˆì§€ë§‰ ë‚ ë“¤ ì¶”ê°€
            const prevMonth = month === 0 ? 11 : month - 1;
            const prevYear = month === 0 ? year - 1 : year;
            const prevMonthLastDay = new Date(prevYear, prevMonth + 1, 0).getDate();
            
            for (let i = startDayOfWeek - 1; i >= 0; i--) {
                const dayCell = createDayCell(prevMonthLastDay - i, true, prevYear, prevMonth);
                grid.appendChild(dayCell);
            }
            
            // ì´ë²ˆ ë‹¬ ë‚ ì§œë“¤ ì¶”ê°€
            for (let day = 1; day <= lastDay.getDate(); day++) {
                const dayCell = createDayCell(day, false, year, month);
                grid.appendChild(dayCell);
            }
            
            // ë‹¤ìŒ ë‹¬ ì²« ë‚ ë“¤ ì¶”ê°€ (42ê°œ ì…€ ë§ì¶”ê¸°)
            const totalCells = grid.children.length - 7; // ìš”ì¼ í—¤ë” ì œì™¸
            const remainingCells = 42 - totalCells;
            const nextMonth = month === 11 ? 0 : month + 1;
            const nextYear = month === 11 ? year + 1 : year;
            
            for (let day = 1; day <= remainingCells; day++) {
                const dayCell = createDayCell(day, true, nextYear, nextMonth);
                grid.appendChild(dayCell);
            }
        }
        
        // ë‚ ì§œ ì…€ ìƒì„±
        function createDayCell(day, isOtherMonth, year, month) {
        const cell = document.createElement('div');
        cell.className = 'day-cell';
    
        // ì˜¤ëŠ˜ ë‚ ì§œ í™•ì¸
        const today = new Date();
        const isToday = !isOtherMonth && year === today.getFullYear() && 
            month === today.getMonth() && day === today.getDate();
    
        if (isOtherMonth) {
            cell.classList.add('other-month');
            cell.textContent = day;
        } else if (isToday) {
            // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
            cell.classList.add('today');
        
            // ìºë¦­í„° ì´ë¯¸ì§€ ì¶”ê°€
            const img = document.createElement('img');
            img.className = 'today-character';
            img.src = 'character.png';  // HTML íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— ìˆëŠ” ì´ë¯¸ì§€
            img.alt = 'ì˜¤ëŠ˜';
            img.onerror = function() {
                // ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ì‹œ ê¸°ë³¸ ì´ëª¨ì§€ë¡œ ëŒ€ì²´
                this.style.display = 'none';
                const emoji = document.createElement('span');
                emoji.textContent = 'ğŸ§‘';
                emoji.style.cssText = 'font-size: 35px;';
                cell.appendChild(emoji);
            };
        
            const dayNum = document.createElement('span');
            dayNum.className = 'day-number';
            dayNum.textContent = day;
        
            cell.appendChild(img);
            cell.appendChild(dayNum);
        } else {
            // ì¼ë°˜ ë‚ ì§œ
            cell.textContent = day;
        }
    
        // ìŠ¤ì¼€ì¤„ì´ ìˆëŠ” ë‚ ì§œ í‘œì‹œ
        const dateKey = `${year}-${month + 1}-${day}`;
        if (scheduleData[dateKey] && scheduleData[dateKey].length > 0) {
            cell.classList.add('has-schedule');
        }
    
        // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
        cell.addEventListener('click', () => {
            selectDate(year, month, day);
        });
    
        return cell;
    }
        
        // ë‚ ì§œ ì„ íƒ
        function selectDate(year, month, day) {
            selectedDate = { year, month, day };
            const dateStr = `${year}ë…„ ${month + 1}ì›” ${day}ì¼`;
            
            // ìš”ì¼ ê³„ì‚°
            const date = new Date(year, month, day);
            const dayNames = ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'];
            const dayName = dayNames[date.getDay()];
            
            document.getElementById('selectedDate').textContent = `${dateStr} (${dayName})`;
            
            // ì„ íƒëœ ë‚ ì§œ í•˜ì´ë¼ì´íŠ¸
            document.querySelectorAll('.day-cell').forEach(cell => {
                cell.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // ìƒì„¸ë³´ê¸°ë¡œ ì „í™˜
            document.getElementById('calendarSection').style.display = 'none';
            document.getElementById('detailSection').style.display = 'block';
            
            // í•´ë‹¹ ë‚ ì§œ ë°ì´í„° ë¡œë“œ
            loadDateData();
        }
        
        // ë‚ ì§œ ë°ì´í„° ë¡œë“œ
        function loadDateData() {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            
            // ìŠ¤ì¼€ì¤„ í…Œì´ë¸” ìƒì„±
            createScheduleTable();
            
            // ì¼ê¸° ë¡œë“œ
            const diary = diaryData[dateKey] || '';
            document.getElementById('diaryText').value = diary;
        }
        
        // ìŠ¤ì¼€ì¤„ í…Œì´ë¸” ìƒì„±
        function createScheduleTable() {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            const schedules = scheduleData[dateKey] || [];
            const container = document.getElementById('scheduleTableContainer');
            
            if (schedules.length === 0) {
                container.innerHTML = '<div class="empty-schedule">ë“±ë¡ëœ ìŠ¤ì¼€ì¤„ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆ ìŠ¤ì¼€ì¤„ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</div>';
                return;
            }
            
            let tableHTML = `
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th class="checkbox-cell">âœ“</th>
                            <th class="time-cell">ì‹œê°„</th>
                            <th class="content-cell">ì¼ì • ë‚´ìš©</th>
                            <th class="action-cell">ì‘ì—…</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            schedules.forEach((schedule, index) => {
                tableHTML += `
                    <tr id="schedule-row-${index}">
                        <td class="checkbox-cell">
                            <input type="checkbox" class="schedule-checkbox" 
                                   onclick="completeSchedule(${index})" 
                                   ${schedule.completed ? 'checked' : ''}>
                        </td>
                        <td class="time-cell">
                            <input type="time" value="${schedule.time || ''}" 
                                   onchange="updateScheduleTime(${index}, this.value)"
                                   style="border: 1px solid #ddd; border-radius: 4px; padding: 6px; width: 100%;">
                        </td>
                        <td class="content-cell">
                            <input type="text" value="${schedule.content || ''}" 
                                   placeholder="ì¼ì • ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                                   onchange="updateScheduleContent(${index}, this.value)"
                                   style="border: 1px solid #ddd; border-radius: 4px; padding: 6px; width: 100%;">
                        </td>
                        <td class="action-cell">
                            <button class="delete-btn" onclick="deleteSchedule(${index})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            container.innerHTML = tableHTML;
        }
        
        // ìŠ¤ì¼€ì¤„ ì™„ë£Œ ì²˜ë¦¬
        function completeSchedule(index) {
            const result = confirm('ì´ ìŠ¤ì¼€ì¤„ì„ ì™„ë£Œí–ˆìŠµë‹ˆê¹Œ?');
            if (result) {
                const row = document.getElementById(`schedule-row-${index}`);
                row.classList.add('completing');
                
                // 10ì´ˆ í›„ ìŠ¤ì¼€ì¤„ ì‚­ì œ
                setTimeout(() => {
                    const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
                    if (scheduleData[dateKey]) {
                        scheduleData[dateKey].splice(index, 1);
                        if (scheduleData[dateKey].length === 0) {
                            delete scheduleData[dateKey];
                        }
                        createScheduleTable();
                        updateCalendar();
                        saveToLocalStorage(); // ìë™ ì €ì¥
                    }
                }, 10000);
                
                // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
                showCompletionMessage();
            } else {
                // ì²´í¬ë°•ìŠ¤ í•´ì œ
                const checkbox = document.querySelector(`#schedule-row-${index} .schedule-checkbox`);
                checkbox.checked = false;
            }
        }
        
        // ì™„ë£Œ ë©”ì‹œì§€ í‘œì‹œ
        function showCompletionMessage() {
            // ê¸°ì¡´ ë©”ì‹œì§€ê°€ ìˆë‹¤ë©´ ì œê±°
            const existingMessage = document.getElementById('completion-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            // ìƒˆ ë©”ì‹œì§€ ìƒì„±
            const message = document.createElement('div');
            message.id = 'completion-message';
            message.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4caf50;
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
            `;
            message.innerHTML = 'âœ… ìŠ¤ì¼€ì¤„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! 10ì´ˆ í›„ ìë™ ì‚­ì œë©ë‹ˆë‹¤.';
            
            // CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(message);
            
            // 5ì´ˆ í›„ ë©”ì‹œì§€ ì œê±°
            setTimeout(() => {
                if (message && message.parentNode) {
                    message.style.animation = 'slideIn 0.3s ease-out reverse';
                    setTimeout(() => {
                        if (message && message.parentNode) {
                            message.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }
        
        // ìƒˆ ìŠ¤ì¼€ì¤„ í–‰ ì¶”ê°€
        function addScheduleRow() {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            if (!scheduleData[dateKey]) {
                scheduleData[dateKey] = [];
            }
            
            scheduleData[dateKey].push({
                time: '',
                content: ''
            });
            
            createScheduleTable();
            updateCalendar(); // ìº˜ë¦°ë”ì— ìŠ¤ì¼€ì¤„ í‘œì‹œ ì—…ë°ì´íŠ¸
            saveToLocalStorage(); // ìë™ ì €ì¥
        }
        
        // ìŠ¤ì¼€ì¤„ ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateScheduleTime(index, time) {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            if (scheduleData[dateKey] && scheduleData[dateKey][index]) {
                scheduleData[dateKey][index].time = time;
                saveToLocalStorage(); // ìë™ ì €ì¥
            }
        }
        
        // ìŠ¤ì¼€ì¤„ ë‚´ìš© ì—…ë°ì´íŠ¸
        function updateScheduleContent(index, content) {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            if (scheduleData[dateKey] && scheduleData[dateKey][index]) {
                scheduleData[dateKey][index].content = content;
                
                // ë‚´ìš©ì´ ìˆìœ¼ë©´ ìº˜ë¦°ë”ì— ìŠ¤ì¼€ì¤„ í‘œì‹œ ì—…ë°ì´íŠ¸
                if (content.trim()) {
                    updateCalendar();
                }
                saveToLocalStorage(); // ìë™ ì €ì¥
            }
        }
        
        // ìŠ¤ì¼€ì¤„ ì‚­ì œ
        function deleteSchedule(index) {
            if (confirm('ì´ ìŠ¤ì¼€ì¤„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
                if (scheduleData[dateKey]) {
                    scheduleData[dateKey].splice(index, 1);
                    if (scheduleData[dateKey].length === 0) {
                        delete scheduleData[dateKey];
                    }
                    createScheduleTable();
                    updateCalendar();
                    saveToLocalStorage(); // ìë™ ì €ì¥
                }
            }
        }
        
        // ë°ì´í„° ì €ì¥
        function saveData() {
            const dateKey = `${selectedDate.year}-${selectedDate.month + 1}-${selectedDate.day}`;
            const diaryText = document.getElementById('diaryText').value;
            
            if (diaryText.trim()) {
                diaryData[dateKey] = diaryText;
            } else {
                delete diaryData[dateKey];
            }
            
            // localStorageì— ì €ì¥
            saveToLocalStorage();
            
            alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“');
        }
        
        // ìº˜ë¦°ë”ë¡œ ëŒì•„ê°€ê¸°
        function backToCalendar() {
            document.getElementById('detailSection').style.display = 'none';
            document.getElementById('calendarSection').style.display = 'block';
        }
        
        // ì›” ë³€ê²½
        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            updateCalendar();
        }
    </script>
</body>
</html>